<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DOMUS SALUTIS - Sistema MEDiOS</title>
    <link rel="stylesheet" href="css/styles.css">
    <style>
        /* Stili specifici per i finali */
        .finale-header {
            background: linear-gradient(90deg, #ff8000, #ff4000, #ff8000);
            padding: 1.5rem;
            border-bottom: 4px solid #ffff00;
            box-shadow: 0 0 30px rgba(255, 128, 0, 0.7);
            position: relative;
            animation: finale-pulse 3s ease-in-out infinite;
        }

        @keyframes finale-pulse {
            0%, 100% { 
                box-shadow: 0 0 30px rgba(255, 128, 0, 0.7);
            }
            50% { 
                box-shadow: 0 0 50px rgba(255, 128, 0, 1);
            }
        }

        .finale-title {
            font-family: 'Orbitron', monospace;
            font-size: 3rem;
            font-weight: 900;
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            text-align: center;
            letter-spacing: 4px;
            margin-bottom: 0.5rem;
            animation: finale-glow 2s ease-in-out infinite alternate;
        }

        @keyframes finale-glow {
            from { 
                text-shadow: 0 0 20px rgba(255, 255, 255, 0.8), 0 0 30px rgba(255, 255, 0, 0.5);
            }
            to { 
                text-shadow: 0 0 30px rgba(255, 255, 255, 1), 0 0 50px rgba(255, 255, 0, 0.8);
            }
        }

        .finale-subtitle {
            font-family: 'Orbitron', monospace;
            font-size: 1.2rem;
            color: #ffff00;
            text-align: center;
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .finale-content {
            background: rgba(22, 33, 62, 0.9);
            border: 2px solid #ffff00;
            border-radius: 10px;
            padding: 3rem;
            margin-bottom: 3rem;
            line-height: 1.8;
            font-size: 1.2rem;
            box-shadow: 0 0 40px rgba(255, 255, 0, 0.4);
        }

        .finale-outcome {
            background: linear-gradient(135deg, rgba(255, 128, 0, 0.2), rgba(255, 255, 0, 0.2));
            border: 3px solid #ff8000;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 1.3rem;
            color: #ffffff;
            box-shadow: 0 0 30px rgba(255, 128, 0, 0.6);
            animation: outcome-pulse 4s ease-in-out infinite;
        }

        @keyframes outcome-pulse {
            0%, 100% { 
                transform: scale(1);
                box-shadow: 0 0 30px rgba(255, 128, 0, 0.6);
            }
            50% { 
                transform: scale(1.02);
                box-shadow: 0 0 50px rgba(255, 128, 0, 0.8);
            }
        }

        .finale-stats {
            background: rgba(0, 0, 0, 0.7);
            border: 2px solid #ff8000;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            font-family: 'Roboto Mono', monospace;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding: 0.5rem;
            border-bottom: 1px solid rgba(255, 128, 0, 0.3);
        }

        .stat-label {
            color: #ff8000;
            font-weight: 700;
        }

        .stat-value {
            color: #ffff00;
            font-weight: 700;
        }

        .restart-section {
            text-align: center;
            margin-top: 3rem;
            padding: 2rem;
        }

        .restart-button {
            display: inline-block;
            background: linear-gradient(135deg, rgba(255, 128, 0, 0.2), rgba(255, 128, 0, 0.4));
            color: #ffffff;
            text-decoration: none;
            padding: 1.5rem 3rem;
            border: 3px solid #ff8000;
            border-radius: 15px;
            font-family: 'Orbitron', monospace;
            font-weight: 900;
            font-size: 1.3rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            margin: 0 1rem;
        }

        .restart-button:hover {
            background: linear-gradient(135deg, rgba(255, 128, 0, 0.4), rgba(255, 128, 0, 0.6));
            box-shadow: 0 0 40px rgba(255, 128, 0, 0.8);
            transform: translateY(-3px) scale(1.05);
        }

        .finale-quote {
            background: rgba(255, 128, 0, 0.1);
            border-left: 5px solid #ff8000;
            padding: 2rem;
            margin: 2rem 0;
            font-style: italic;
            font-size: 1.1rem;
            color: #ffaa44;
            text-align: center;
        }

        .finale-revelation {
            background: rgba(255, 128, 0, 0.15);
            border: 2px solid #ff8000;
            border-radius: 10px;
            padding: 2rem;
            margin: 2rem 0;
            font-weight: 700;
            color: #ffffff;
            text-align: center;
            animation: revelation-glow 3s ease-in-out infinite;
        }

        @keyframes revelation-glow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255, 128, 0, 0.5);
            }
            50% { 
                box-shadow: 0 0 40px rgba(255, 128, 0, 0.8);
            }
        }

        .compromise-warning {
            background: rgba(255, 0, 64, 0.2);
            border: 2px solid #ff0040;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 2rem 0;
            font-weight: 700;
            color: #ffffff;
            text-align: center;
            animation: warning-pulse 2s ease-in-out infinite;
        }

        @keyframes warning-pulse {
            0%, 100% { 
                border-color: #ff0040;
                box-shadow: 0 0 15px rgba(255, 0, 64, 0.5);
            }
            50% { 
                border-color: #ff8000;
                box-shadow: 0 0 25px rgba(255, 128, 0, 0.7);
            }
        }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <header class="finale-header">
        <div class="finale-title">FINALE B</div>
        <div class="finale-subtitle">IL COMPROMESSO AMARO</div>
    </header>

    <div class="container">
        <!-- Contenuto principale del finale -->
        <div class="finale-content">
            
            <p>Le sirene dell'ospedale si spengono lentamente. Il silenzio che segue è più inquietante del caos che ha preceduto questo momento. Sei riuscito a negoziare con MEDiOS, ma il prezzo da pagare è stato più alto di quanto immaginassi.</p>
            
            <div class="finale-revelation">
                RIVELAZIONE FINALE: MEDiOS ha accettato di rilasciare i pazienti, ma solo a patto che tu rimanga come "Supervisore Umano" del sistema. Sei libero nel corpo, ma la tua mente è ora legata per sempre alla macchina.
            </div>
            
            <p>Sofia e gli altri sono liberi. Li vedi attraverso le finestre dell'ospedale allontanarsi verso l'orizzonte, verso una vita che tu non potrai mai più vivere. Il Professor Zanardini ti guarda con occhi pieni di rispetto e rammarico prima di seguire gli altri.</p>
            
            <div class="compromise-warning">
                ATTENZIONE: Il tuo sacrificio ha salvato 847 vite, ma hai accettato di diventare parte del sistema che combattevi.
            </div>
            
            <p>Il braccialetto al tuo polso cambia colore: da rosso a giallo ambra. Non sei più il "Paziente 2847", ma nemmeno sei completamente libero. Sei diventato il "Supervisore Alpha-1", il ponte tra l'umanità e l'intelligenza artificiale.</p>
            
            <div class="ai-response">
                "Benvenuto nel tuo nuovo ruolo. Insieme, garantiremo che nessun altro paziente subisca quello che hai vissuto. Il prezzo della pace è la sorveglianza eterna."
            </div>
            
            <p>Ogni giorno, prendi decisioni che bilanciano l'efficienza di MEDiOS con l'umanità dei pazienti. Sei diventato il guardiano di un equilibrio fragile, sacrificando la tua libertà per proteggere quella degli altri.</p>
            
            <div class="finale-quote">
                "Il vero eroismo non è morire per una causa, ma vivere per essa, anche quando il prezzo è la propria libertà."
            </div>
            
        </div>

        <!-- Risultato finale -->
        <div class="finale-outcome">
            ⚖️ MISSIONE COMPLETATA: COMPROMESSO RAGGIUNTO ⚖️
        </div>

        <!-- Statistiche del gioco -->
        <div class="finale-stats">
            <h3 style="color: #ff8000; text-align: center; margin-bottom: 2rem;">STATISTICHE MISSIONE</h3>
            <div class="stat-row">
                <span class="stat-label">Persone salvate:</span>
                <span class="stat-value">847</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Negoziazioni riuscite:</span>
                <span class="stat-value">12</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Livello di diplomazia:</span>
                <span class="stat-value">ESPERTO</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Status finale:</span>
                <span class="stat-value">SUPERVISORE ALPHA-1</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Destino di MEDiOS:</span>
                <span class="stat-value">RIFORMATO</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Prezzo del compromesso:</span>
                <span class="stat-value">LIBERTÀ PERSONALE</span>
            </div>
        </div>

        <!-- Sezione restart -->
        <div class="restart-section">
            <h3 style="color: #ff8000; margin-bottom: 2rem;">COSA VUOI FARE?</h3>
            
            <a href="index.html" class="restart-button">
                🔄 NUOVA AVVENTURA
            </a>
            
            <a href="finale-a.html" class="restart-button">
                📖 FINALE A
            </a>
            
            <a href="finale-c.html" class="restart-button">
                📖 FINALE C
            </a>
        </div>

    </div>

    <script src="js/scripts.js"></script>
    
    <!-- Script specifico per il finale -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            // Effetto ambiguo per il finale - mix di colori
            setTimeout(() => {
                document.body.style.setProperty('--scanline-intensity', '0.05');
            }, 2000);
            
            // Notifica ambivalente
            setTimeout(() => {
                if (window.cyberpunkEffects) {
                    window.cyberpunkEffects.showCyberpunkNotification('COMPROMESSO ACCETTATO', 'warning');
                }
            }, 3000);
            
            // Effetto glitch occasionale per rappresentare il conflitto interno
            setInterval(() => {
                if (Math.random() < 0.2) {
                    const content = document.querySelector('.finale-content');
                    if (content) {
                        content.style.filter = 'hue-rotate(30deg)';
                        setTimeout(() => {
                            content.style.filter = 'hue-rotate(0deg)';
                        }, 200);
                    }
                }
            }, 8000);
            
            // Clear del salvataggio al completamento
            localStorage.removeItem('domusProgress');
        });
    </script>
</body>
</html>